#include "../Ori/Orientation.h"
#include "../MeshUtil/MyMesh.h"
#include "../MeshUtil/MeshIO.h"
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/opencv.hpp>
#include <string>
#include <iostream>

void dosomethingmesh(MyMesh& mesh)
{

}



int main()
{
	// Loading images
	std::string imgloadname("/home/jingtongli/Desktop/ipa/data/0.jpg");
	cv::Mat img=cv::imread(imgloadname);

	// Edge images
	cv::Mat dstimg, edge, grayImage;
	dstimg.create(img.size(), img.type());
	//cv::cvtColor(img, grayImage, cv::COLOR_BGR2GRAY);
	cv::blur(img, edge, cv::Size(3, 3));
	Canny(edge, dstimg, 3, 9, 3);


	// Display images
	cv::imshow("Original.jpg",img);
	cv::imshow("Edge", dstimg);

	// Loading ori
	std::string oriloadname("/home/jingtongli/Desktop/ipa/data/0.ori");
	Orientation ori(oriloadname);

	// Loading mesh
	MyMesh mesh;
	std::string meshloadname("/home/jingtongli/Desktop/ipa/data/Mesh_cut.ply");
	MeshIO::readMesh(mesh, meshloadname, false, false);

	// Do something
	dosomethingmesh(mesh);

	// Write mesh
	std::string meshsavename("/home/jingtongli/Desktop/ipa/data/Mesh_out.ply");
	MeshIO::writeMesh(mesh, meshsavename, false, false);

	std::cout<<std::endl<<"Finished";

	cv::waitKey(0);

	return 1;
}
